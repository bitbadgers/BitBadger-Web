function collapseit(cur_id, type, _django){document.getElementById(previousId+"-active").style.backgroundColor="";document.getElementById(cur_id+"-active").style.backgroundColor="red";if(prevType=="content"){var prevContentId=document.getElementById(previousId+"-content");}else{var prevContentId=document.getElementById(previousId+"-frm");}if(type=="content"){var contentId=document.getElementById(cur_id);var collapseId=document.getElementById(cur_id+"-collapse");prevContentId.style.display="none";var curContentId=document.getElementById(cur_id+"-content");if(contentId.style.display==="none"){contentId.style.display="block";collapseId.innerHTML="&minus;";curContentId.style.display="block";}else{contentId.style.display="none";collapseId.innerHTML="&plus;";curContentId.style.display="block";}previousId=cur_id;prevType=type;}else{prevContentId.style.display="none";var curFrmId=document.getElementById(cur_id+"-frm");curFrmId.style.display="block";previousId=cur_id;prevType=type;}}var studentGlobalList;function popout(valueId, rmId){try{var curOpt=prevOption;var optionValue=valueId.options[curOpt].value;var htmlText=valueId.options[curOpt].innerHTML;var opt=document.createElement("option");opt.text=htmlText;opt.value=optionValue;rmId.appendChild(opt);}catch(error){}for(var i=0;i < rmId.length;i++){prevOption=valueId.selectedIndex;if(rmId.options[i].value===valueId.options[valueId.selectedIndex].value){rmId.remove(i);break;}}}function studentSort(data){var form=document.querySelector('input[name="form"]:checked').value;var streams=document.querySelectorAll('input[name="stream"]:checked');var streamList=[];var len=streams.length;const k=len;var ind1=len-1;while(len--){var val=streams[len].value;if(k==1){streamList.push(val);}else{if(val=="all"){document.getElementById('all-streams').checked=false;}else{streamList.push(val);}}}studentList=JSON.parse(data);sortedList=[];x=streamList.length;while(x--){if(form=="all"){if(streamList[x]=="all"){sortedList=studentList;}else{studentList.forEach(element=>{if(element[5]==streamList[x]){sortedList.push(element);}});}}else{if(streamList[x]=="all"){studentList.forEach(element=>{if(element[4]==form){sortedList.push(element);}});}else{studentList.forEach(element=>{if(element[4]==form && element[5]==streamList[x]){sortedList.push(element);}});}}}studentGlobalList=sortedList;studentTableFill(sortedList);}function studentSearchFunct(){var searchedIndex=document.getElementById("student_search_field").value;var reg=new RegExp(searchedIndex,"i");var newList=[];studentGlobalList.forEach(element=>{x=element.length;while(x--){if(reg.test(element[x])){newList.push(element);break;}}});studentTableFill(newList);}function radioEffect(htmlName, val){query="input[name='"+htmlName+"']:checked";if(val=="all"){var choices=document.querySelectorAll(query);var ln=choices.length;while(ln--){if(choices[ln].value !="all"){choices[ln].checked=false;}}}else{var choices=document.querySelectorAll(query);var ln=choices.length;while(ln--){if(choices[ln].value=="all"){var ln1=choices.length;while(ln1--){if(choices[ln1].value=="all"){choices[ln].checked=false;break;}}}}}}function GradingSystemGen(listId, A){var grades=['A','A-','B+','B','B-','C+','C','C-','D+','D','D-','E'];var mark=A;var list;if(typeof(listId)=="string"){list=document.getElementById(listId);}else{list=listId;}try{var elements=list.getElementsByTagName('li');x=elements.length;while(x--){list.removeChild(elements[x]);}}catch(error){}var len=grades.length;if(A >=55){for(var x=0;x < len;x++){var li=document.createElement("li");var innerText;if(x==0){innerText=mark+"-100 "+" &nbsp;: &nbsp;&nbsp;"+grades[x]+"&nbsp;&nbsp;&nbsp;&nbsp;";}else if(x==len-1){innerText="0-"+(mark+4)+ " &nbsp;&nbsp;&nbsp;: &nbsp;&nbsp;"+grades[x]+"&nbsp;&nbsp;&nbsp;&nbsp;";}else{innerText=mark+"-"+(mark+4)+ " &nbsp;&nbsp;: &nbsp;&nbsp;"+grades[x]+"&nbsp;&nbsp;&nbsp;&nbsp;";}li.innerHTML=innerText;mark-=5;list.appendChild(li);}}}function currentGradingTables(jsonList){var list=JSON.parse(jsonList);var commonSbj=[];var grades=[];list.forEach(element=>{var gLen=grades.length;if(gLen !=0){var isFed=false;for(var y=0;y < gLen;y++){if(element[2]==grades[y]){commonSbj[y]+=','+element[0]; isFed=true; break;}}if(!isFed){commonSbj.push(element[0]);grades.push(element[2]);}}else{commonSbj.push(element[0]);grades.push(element[2]);}});var counter=0;commonSbj.forEach(element=>{var fieldset=document.createElement("fieldset");var legend=document.createElement("legend");var ul=document.createElement("ul");var subjects=element.split(",");ul.id=subjects[0];const len=subjects.length;var subjectText="";if(len > 1){for(var x=0;x < len;x++){if(x==(len-1)){subjectText+=' and '+subjects[x];}else{if(x==(len-2)){subjectText+=subjects[x];}else{subjectText+=subjects[x]+', ';}}}}else{subjectText+=subjects[0];}legend.innerHTML="Grading for: <br>"+subjectText;GradingSystemGen(ul, parseInt(grades[counter]));fieldset.appendChild(legend);fieldset.appendChild(ul);document.getElementById("current-grading").appendChild(fieldset);counter++;});}